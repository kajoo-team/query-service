Generic model for bookshelf (ORM)

[![CircleCI](https://circleci.com/gh/kajoo-team/query-service.svg?style=shield&circle-token=c36a05f2d3157efde6b11a3c673a5344b50aa6fd)](https://circleci.com/gh/kajoo-team/query-service)
[![Maintainability](https://api.codeclimate.com/v1/badges/697621a414e9b6c2fef9/maintainability)](https://codeclimate.com/repos/5eb4a5b0480429014d004aca/maintainability)
[![codecov](https://codecov.io/gh/kajoo-team/query-service/branch/ch1399/query-service-publicar-mÃ³dulo/graph/badge.svg?token=qdJ8YXiva2)](https://codecov.io/gh/kajoo-team/query-service)
[![Test Coverage](https://api.codeclimate.com/v1/badges/697621a414e9b6c2fef9/test_coverage)](https://codeclimate.com/repos/5eb4a5b0480429014d004aca/test_coverage)

## Install

`npm install @kajooteam/query-service`

## Quick-start

```js
app/
  queries/
  script.js
  index.js
```

```js
// index.js (aka bootstrap/init file)
// Pass the `knex` instance
require('@kajoo-team/query-service/lib/configs/knexInstance')(knex)
```

```js
// queries/random.sql
SELECT *
FROM randomTable
WHERE date >= :date
AND active = :active
```

```js
// script.js
const QueryService = require('query-service')

const params = {
  date  : new Date(),
  active: true
}

QueryService
  .run('app/queries/random', params)
  .then(...)
  .catch(...)
```

## Docs

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [getInstance](#getinstance)
    -   [Parameters](#parameters)
-   [QueryService](#queryservice)
    -   [run](#run)
        -   [Parameters](#parameters-1)
        -   [Examples](#examples)
    -   [get](#get)
        -   [Parameters](#parameters-2)

### getInstance

Returns the current `knex` instance

#### Parameters

-   `knex` **knex** The `knex` instance (@see <http://knexjs.org/#Installation-client>)

Returns **knex** The `knex` instance object

### QueryService

Query runner service

#### run

Runs the `queryPath`

##### Parameters

-   `queryPath` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The `query` path (relative to project's root path)
-   `params` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)**

##### Examples

```javascript
// queries/random.sql
 SELECT *
 FROM randomTable
 WHERE date >= :date
 AND active = :active

// index.js
 const params = {
   date  : new Date(),
   active: true
 }

 QueryService
   run('app/queries/random', params)
     .then(...)
     .catch(...)

// [ { ... }, { ... }, ... ]
```

Returns **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** The returned `rows`

#### get

Returns the `query` from `fileName`

##### Parameters

-   `queryPath` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The `query` path (relative to project's root path)
-   `params` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** The `query` params

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The `sql` query
